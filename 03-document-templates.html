
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Document manufacture for fun and profit">
      
      
        <meta name="author" content="Murray Andrews">
      
      
      
        <link rel="prev" href="02-document-creation.html">
      
      
        <link rel="next" href="04-template-compilation.html">
      
      
      <link rel="icon" href="img/docma-logo/png/docma-icon-light.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Document Templates - Docma User Guide</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="css/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#document-templates" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Docma User Guide" class="md-header__button md-logo" aria-label="Docma User Guide" data-md-component="logo">
      
  <img src="img/docma-logo/svg/docma-icon-mid-2.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Docma User Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Document Templates
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Docma User Guide" class="md-nav__button md-logo" aria-label="Docma User Guide" data-md-component="logo">
      
  <img src="img/docma-logo/svg/docma-icon-mid-2.svg" alt="logo">

    </a>
    Docma User Guide
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="01-overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="02-document-creation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Document Creation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Document Templates
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="03-document-templates.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Document Templates
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#template-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      Template Configuration File
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Template Configuration File">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#document-references" class="md-nav__link">
    <span class="md-ellipsis">
      Document References
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overlay-documents" class="md-nav__link">
    <span class="md-ellipsis">
      Overlay Documents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#document-imports" class="md-nav__link">
    <span class="md-ellipsis">
      Document Imports
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#weasyprint-options" class="md-nav__link">
    <span class="md-ellipsis">
      WeasyPrint Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#css-style-sheets" class="md-nav__link">
    <span class="md-ellipsis">
      CSS Style Sheets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      Sample Configuration File
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#document-template-content" class="md-nav__link">
    <span class="md-ellipsis">
      Document Template Content
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Document Template Content">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#html-files-html-htm" class="md-nav__link">
    <span class="md-ellipsis">
      HTML Files (*.html, *.htm)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pdf-files-pdf" class="md-nav__link">
    <span class="md-ellipsis">
      PDF Files (*.pdf)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#markdown-files-md" class="md-nav__link">
    <span class="md-ellipsis">
      Markdown Files (*.md)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#locale-in-docma-templates" class="md-nav__link">
    <span class="md-ellipsis">
      Locale in Docma Templates
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="04-template-compilation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Template Compilation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="05-template-rendering.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Template Rendering
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="06-jinja-rendering.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Jinja Rendering
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="07-charts-and-graphs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Charts and Graphs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="08-data-sources.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Sources
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="09-fonts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fonts
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="10-installation-and-usage.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation and Usage
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="11-extending-docma.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extending Docma
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="12-api.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="13-caveats-and-issues.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Caveats and Issues
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="14-credits.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Credits
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="15-release-notes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Release Notes
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#template-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      Template Configuration File
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Template Configuration File">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#document-references" class="md-nav__link">
    <span class="md-ellipsis">
      Document References
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overlay-documents" class="md-nav__link">
    <span class="md-ellipsis">
      Overlay Documents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#document-imports" class="md-nav__link">
    <span class="md-ellipsis">
      Document Imports
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#weasyprint-options" class="md-nav__link">
    <span class="md-ellipsis">
      WeasyPrint Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#css-style-sheets" class="md-nav__link">
    <span class="md-ellipsis">
      CSS Style Sheets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      Sample Configuration File
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#document-template-content" class="md-nav__link">
    <span class="md-ellipsis">
      Document Template Content
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Document Template Content">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#html-files-html-htm" class="md-nav__link">
    <span class="md-ellipsis">
      HTML Files (*.html, *.htm)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pdf-files-pdf" class="md-nav__link">
    <span class="md-ellipsis">
      PDF Files (*.pdf)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#markdown-files-md" class="md-nav__link">
    <span class="md-ellipsis">
      Markdown Files (*.md)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#locale-in-docma-templates" class="md-nav__link">
    <span class="md-ellipsis">
      Locale in Docma Templates
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="document-templates">Document Templates<a class="headerlink" href="#document-templates" title="Permanent link">&para;</a></h1>
<p>The source directory for a document template should be created using the docma
CLI:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1">docma<span class="w"> </span>new<span class="w"> </span>&lt;DIRECTORY&gt;
</span></code></pre></div>
<p>The resulting directory is structured thus:</p>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-1-1"><span class="err">&lt;DIRECTORY&gt;/</span>
</span><span id="__span-1-2"><span class="err">├──</span><span class="w"> </span><span class="err">config.yaml</span><span class="w">    </span><span class="err">...</span><span class="w"> </span><span class="err">Mandatory</span>
</span><span id="__span-1-3"><span class="err">├──</span><span class="w"> </span><span class="err">charts/</span><span class="w">        </span><span class="err">...</span><span class="w"> </span><span class="err">Specification</span><span class="w"> </span><span class="err">files</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">charts</span>
</span><span id="__span-1-4"><span class="err">├──</span><span class="w"> </span><span class="err">content/</span><span class="w">       </span><span class="err">...</span><span class="w"> </span><span class="err">Document</span><span class="w"> </span><span class="err">content</span><span class="w"> </span><span class="err">(HTML,</span><span class="w"> </span><span class="err">PDF,</span><span class="w"> </span><span class="err">Markdown</span><span class="w"> </span><span class="err">etc.)</span>
</span><span id="__span-1-5"><span class="err">├──</span><span class="w"> </span><span class="err">data/</span><span class="w">          </span><span class="err">...</span><span class="w"> </span><span class="err">Data</span><span class="w"> </span><span class="err">files</span><span class="w"> </span><span class="err">(e.g</span><span class="w"> </span><span class="err">CSV</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">JSONL</span><span class="w"> </span><span class="err">files)</span>
</span><span id="__span-1-6"><span class="err">├──</span><span class="w"> </span><span class="err">fonts/</span><span class="w">         </span><span class="err">...</span><span class="w"> </span><span class="err">Font</span><span class="w"> </span><span class="err">files</span><span class="w"> </span><span class="err">(e.g.</span><span class="w"> </span><span class="err">.ttf</span><span class="w"> </span><span class="err">files)</span>
</span><span id="__span-1-7"><span class="err">├──</span><span class="w"> </span><span class="err">overlays/</span><span class="w">      </span><span class="err">...</span><span class="w"> </span><span class="err">Overlay</span><span class="w"> </span><span class="err">content</span><span class="w"> </span><span class="err">files</span><span class="w"> </span><span class="err">(Typically</span><span class="w"> </span><span class="err">HTML</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">PDF)</span>
</span><span id="__span-1-8"><span class="err">├──</span><span class="w"> </span><span class="err">queries/</span><span class="w">       </span><span class="err">...</span><span class="w"> </span><span class="err">Query</span><span class="w"> </span><span class="err">specifications</span><span class="w"> </span><span class="err">used</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">charts</span>
</span><span id="__span-1-9"><span class="err">└──</span><span class="w"> </span><span class="err">resources/</span><span class="w">     </span><span class="err">...</span><span class="w"> </span><span class="err">HTML</span><span class="w"> </span><span class="err">resources</span><span class="w"> </span><span class="err">(image</span><span class="w"> </span><span class="err">files</span><span class="w"> </span><span class="err">etc.)</span>
</span></code></pre></div>
<p>Only the <code>config.yaml</code> file is mandated. While the other components can be
present, or not, as required, and directory structure is arbitrary, it is
<strong>strongly</strong> recommended to adhere to the layout shown above.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Files and directories in the template source directory matching <code>.*</code> are not
copied into the compiled template.</p>
</div>
<h2 id="template-configuration-file">Template Configuration File<a class="headerlink" href="#template-configuration-file" title="Permanent link">&para;</a></h2>
<p>The document template configuration file, <code>config.yaml</code>, is critical to the
setup and operation of a <strong>docma</strong> template. The structure of the configuration
file is validated during template compilation. It contains the following
elements.</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Yes</td>
<td>Template identifier. This must be at least 3 chars long, start with an alpha, end with an alphanumeric and contain only alpha-numerics and <code>+-_=</code> characters.</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Yes</td>
<td>Template description.</td>
</tr>
<tr>
<td>owner</td>
<td>string</td>
<td>Yes</td>
<td>Template owner.</td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>Yes</td>
<td>Template version. Must be in the form major.minor.patch (e.g. <code>1.0.0</code>).</td>
</tr>
<tr>
<td>documents</td>
<td>list</td>
<td>Yes</td>
<td>A list of <a href="#document-references">document references</a> to be included in the specified order in the output document.</td>
</tr>
<tr>
<td>overlays</td>
<td>object</td>
<td>No</td>
<td>Document overlay specifications to enable watermarking / stamping of the output document (PDF only). See <a href="05-template-rendering.html#watermarking">Watermarking</a> below.</td>
</tr>
<tr>
<td>imports</td>
<td>list</td>
<td>No</td>
<td>A list of specifications for external files to include during compilation. See <a href="#document-imports">Document Imports</a> below.</td>
</tr>
<tr>
<td>parameters</td>
<td>object</td>
<td>No</td>
<td>Contains optional keys <code>defaults</code> and <code>schema</code>.</td>
</tr>
<tr>
<td>-&gt; defaults</td>
<td>object</td>
<td>No</td>
<td>Default values for rendering parameters.</td>
</tr>
<tr>
<td>-&gt; schema</td>
<td>object</td>
<td>No</td>
<td>A JSON Schema for the rendering parameters. See <a href="05-template-rendering.html#docma-parameter-validation">Docma Parameter Validation</a>.</td>
</tr>
<tr>
<td>options</td>
<td>object</td>
<td>No</td>
<td>Options passed to the WeasyPrint PDF generator. See <a href="#weasyprint-options">WeasyPrint Options</a>.</td>
</tr>
<tr>
<td>-&gt; stylesheets</td>
<td>list</td>
<td>No</td>
<td>A list of CSS style sheet files that will be fed to the PDF generator. See <a href="#css-style-sheets">CSS Style Sheets</a> below.</td>
</tr>
<tr>
<td>metadata</td>
<td>object</td>
<td>No</td>
<td>Values to be added to the output document metadata. See <a href="05-template-rendering.html#document-metadata">Document Metadata</a> below.</td>
</tr>
<tr>
<td>-&gt; author</td>
<td>string</td>
<td>No</td>
<td>Document author.</td>
</tr>
<tr>
<td>-&gt; title</td>
<td>string</td>
<td>No</td>
<td>Document title.</td>
</tr>
<tr>
<td>-&gt; subject</td>
<td>string</td>
<td>No</td>
<td>Document subject.</td>
</tr>
<tr>
<td>-&gt; keywords</td>
<td>string | list</td>
<td>No</td>
<td>A string of semi-colon separated keywords or a list of keywords for the PDF.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prior to docma v2.0, metadata fields were specified in the PDF convention of
<code>/Author</code> instead of <code>author</code>. This is still supported for backward
compatibility but the naming shown above should now be used. Docma will use
the appropriate conventions for PDF and HTML when producing output.</p>
</div>
<h3 id="document-references">Document References<a class="headerlink" href="#document-references" title="Permanent link">&para;</a></h3>
<p>The <code>documents</code> key in the configuration file is a list of component documents
that will be rendered and assembled into the final output document.</p>
<p>Each element in the document list can be either a string containing the name of
a content file or an object containing the following keys:</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>src</td>
<td>string</td>
<td>Yes</td>
<td>Name of a content file.</td>
</tr>
<tr>
<td>if</td>
<td>string</td>
<td>No</td>
<td>A string that will be Jinja rendered with the run-time parameters and evaluated as a truthy value. If the value is true (the default), the document is included. Truthy <em>true</em> values are  <code>true</code> / <code>t</code> / <code>y</code> / <code>yes</code> and non-zero integers. Truthy <em>false</em> values are <code>false</code> / <code>f</code> / <code>no</code> / <code>n</code> and zero and empty strings.</td>
</tr>
</tbody>
</table>
<p>Content files must be of one of the following types:</p>
<ul>
<li>HTML (<code>*.html</code> / <code>*.htm</code>)</li>
<li>PDF (<code>*.pdf</code>) (for PDF output documents only)</li>
</ul>
<p>Content files can (and generally should) be contained within the template source
directory hierarchy. The file is referenced by its path relative to the template
source base directory.</p>
<p>Content files can also be remote and will be loaded dynamically during the
rendering process. This differs from <a href="#document-imports">document imports</a> which
incorporate the document into the template during template compilation.
For remote content files, any of the forms supported by the importer subsystem
can be used. e.g.</p>
<ul>
<li><code>http(s)://host/some/path/...</code></li>
<li><code>s3://bucket/some/path/...</code></li>
</ul>
<p>Unlike imports, dynamically referenced content documents must be in HTML or PDF
format. There is no compilation of other formats to HTML.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It is <em>strongly</em> recommended to include all content files in the template
itself (e.g using <a href="#document-imports">document imports</a> for remote files).
This will be faster and more predictable at run-time as well as
improving traceability of documents.</p>
</div>
<p>For example:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-2-1"><span class="nt">documents</span><span class="p">:</span>
</span><span id="__span-2-2"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">content/cover.html</span>
</span><span id="__span-2-3"><span class="w">  </span><span class="c1"># Our main contract document template</span>
</span><span id="__span-2-4"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">content/contract.html</span>
</span><span id="__span-2-5"><span class="w">  </span><span class="c1"># Boilerplate PDF to include</span>
</span><span id="__span-2-6"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">content/standard-terms.pdf</span>
</span><span id="__span-2-7"><span class="w">  </span><span class="c1"># Reference to a file in S3</span>
</span><span id="__span-2-8"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">s3://my-content-bucket/extra-terms.pdf</span>
</span><span id="__span-2-9"><span class="w">  </span><span class="c1"># Now a conditional document using evaluated parameters.</span>
</span><span id="__span-2-10"><span class="w">  </span><span class="c1"># The &quot;if&quot; condition will evaluate to the string &quot;True&quot; or &quot;False&quot;.</span>
</span><span id="__span-2-11"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">content/even-more-terms.pdf</span>
</span><span id="__span-2-12"><span class="w">    </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">contract.term_in_years</span><span class="nv"> </span><span class="s">&gt;=</span><span class="nv"> </span><span class="s">3</span><span class="nv"> </span><span class="s">}}&#39;</span>
</span></code></pre></div>
<p>Some of the HTML files may have been compiled from other formats (e.g.
Markdown) during the compilation phase. All references to the file during
rendering must use the HTML file name. So, for example, a file <code>content/text.md</code>
in the template source, will be present as <code>content/text.html</code> in the compiled
template.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The original, uncompiled files are also replicated into the template to
allow later recompilation and for traceability. The uncompiled files are not
used in the rendering process.</p>
</div>
<p>See <a href="#document-template-content">Document Template Content</a> for more
information.</p>
<h3 id="overlay-documents">Overlay Documents<a class="headerlink" href="#overlay-documents" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>PDF outputs only.</p>
</div>
<p>The <code>overlays</code> key in the configuration file is a list of documents that are
prepared in the same way as the primary documents. These are used when the final document requires
an overlaid stamp or underlaid watermark. See <a href="05-template-rendering.html#watermarking">Watermarking</a> for
more information.</p>
<h3 id="document-imports">Document Imports<a class="headerlink" href="#document-imports" title="Permanent link">&para;</a></h3>
<p>The <a href="#template-configuration-file">configuration file</a> may contain an <code>imports</code>
key to specify a list of external files that will be included within the
compiled template package. The imported file is processed just like a local
file, including compilation of supported non-HTML formats (e.g. Markdown) into
HTML.</p>
<p>Imports are specified as a URL, with the URL scheme determining the means of
access. Imports are currently supported for:</p>
<ul>
<li>
<p>AWS S3: <code>s3://....</code></p>
</li>
<li>
<p>Web content: <code>http(s)://...</code></p>
</li>
</ul>
<p>The <a href="11-extending-docma.html#content-importers">content importers interface</a> is extensible. New sources
can be added easily.</p>
<p>Each import specification is either a string or an object, like so:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-3-1"><span class="nt">imports</span><span class="p">:</span>
</span><span id="__span-3-2">
</span><span id="__span-3-3"><span class="w">  </span><span class="c1"># Simple string format. This S3 file will be placed in the template based on</span>
</span><span id="__span-3-4"><span class="w">  </span><span class="c1"># the last component of the filename (i.e `myfile.pdf`).</span>
</span><span id="__span-3-5"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">s3://my-bucket/some/path/myfile.pdf</span>
</span><span id="__span-3-6">
</span><span id="__span-3-7"><span class="w">  </span><span class="c1"># Object format to allow a file to be imported and renamed in the process.</span>
</span><span id="__span-3-8"><span class="w">  </span><span class="c1"># This will copy the file into the template as `content/afile.pdf`.</span>
</span><span id="__span-3-9"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">s3://my-bucket/some/path/myfile.pdf</span>
</span><span id="__span-3-10"><span class="w">    </span><span class="nt">as</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">content/afile.pdf</span>
</span><span id="__span-3-11">
</span><span id="__span-3-12"><span class="w">  </span><span class="c1"># This Markdown file will be compiled and can be referenced elsewhere in the</span>
</span><span id="__span-3-13"><span class="w">  </span><span class="c1"># template as &quot;content/mydoc.html&quot;</span>
</span><span id="__span-3-14"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">s3://my-bucket/some/path/somedoc.md</span>
</span><span id="__span-3-15"><span class="w">    </span><span class="nt">as</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">content/mydoc.md</span>
</span><span id="__span-3-16">
</span><span id="__span-3-17"><span class="w">  </span><span class="c1"># Import an image</span>
</span><span id="__span-3-18"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://a.url.com/some/image.png</span>
</span><span id="__span-3-19"><span class="w">    </span><span class="nt">as</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">resources/image.png</span>
</span><span id="__span-3-20">
</span><span id="__span-3-21"><span class="w">  </span><span class="c1"># Import a font:</span>
</span><span id="__span-3-22"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://host/my-corporate-font.ttf</span>
</span><span id="__span-3-23"><span class="w">    </span><span class="nt">as</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fonts/my-corporate-font.ttf</span>
</span></code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Imported docs are limited to 10MB in size.</p>
</div>
<h3 id="weasyprint-options">WeasyPrint Options<a class="headerlink" href="#weasyprint-options" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>PDF outputs only.</p>
</div>
<p>WeasyPrint is used for converting HTML to PDF for PDF document production.  It
provides a number of
<a href="https://doc.courtbouillon.org/weasyprint/stable/api_reference.html#weasyprint.DEFAULT_OPTIONS">options</a>
to control aspects of the PDF production process. These can be specified under
the <code>options</code> key of the <a href="#template-configuration-file">template configuration
file</a>.</p>
<p>The following options are set by docma itself. They can be overridden in the
template but it's best not to.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Value set by docma</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>media</td>
<td>print</td>
<td></td>
</tr>
<tr>
<td>optimize_images</td>
<td>True</td>
<td>This is required to avoid an image loading bug in WeasyPrint.</td>
</tr>
</tbody>
</table>
<h3 id="css-style-sheets">CSS Style Sheets<a class="headerlink" href="#css-style-sheets" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>PDF outputs only.</p>
</div>
<p>The <a href="#template-configuration-file">configuration file</a> may contain an <code>options
--&gt; styesheets</code> key that lists files containing style sheets that will be
applied to <em>all</em> HTML document files when converting them to PDF. Hence, these
files should only contain styles that should be applied everywhere.</p>
<p>In some cases, including for HTML outputs, it will be more appropriate to have
styles defined within the HTML source document to which they relate, or included
from CSS files using the Jinja <code>include</code> directive.</p>
<h3 id="sample-configuration-file">Sample Configuration File<a class="headerlink" href="#sample-configuration-file" title="Permanent link">&para;</a></h3>
<p>A sample file might look like this:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-4-1"><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Contract of Sale</span>
</span><span id="__span-4-2"><span class="nt">owner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Cest Moi</span>
</span><span id="__span-4-3"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
</span><span id="__span-4-4">
</span><span id="__span-4-5"><span class="c1"># List the primary files containing document content. File names are relative to</span>
</span><span id="__span-4-6"><span class="c1"># the root of the template.</span>
</span><span id="__span-4-7"><span class="nt">documents</span><span class="p">:</span>
</span><span id="__span-4-8"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">content/cover.html</span>
</span><span id="__span-4-9"><span class="w">  </span><span class="c1"># Our main contract document template</span>
</span><span id="__span-4-10"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">content/contract.html</span>
</span><span id="__span-4-11"><span class="w">  </span><span class="c1"># Boilerplate PDF to include</span>
</span><span id="__span-4-12"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">content/standard-terms.pdf</span>
</span><span id="__span-4-13"><span class="w">  </span><span class="c1"># Now a conditional document using evaluated parameters.</span>
</span><span id="__span-4-14"><span class="w">  </span><span class="c1"># The &quot;if&quot; condition will evaluate to the string &quot;True&quot; or &quot;False&quot;.</span>
</span><span id="__span-4-15"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">content/extra-terms.pdf</span>
</span><span id="__span-4-16"><span class="w">    </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">contract.term_in_years</span><span class="nv"> </span><span class="s">&gt;=</span><span class="nv"> </span><span class="s">3</span><span class="nv"> </span><span class="s">}}&#39;</span>
</span><span id="__span-4-17">
</span><span id="__span-4-18"><span class="c1"># Bring these files into the package when building the template.</span>
</span><span id="__span-4-19"><span class="nt">imports</span><span class="p">:</span>
</span><span id="__span-4-20"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">s3://my-bucket/common-files/standard-terms.pdf</span>
</span><span id="__span-4-21"><span class="w">    </span><span class="nt">as</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">content/standard-terms.pdf</span>
</span><span id="__span-4-22">
</span><span id="__span-4-23"><span class="c1"># Used in the HTML to PDF conversion</span>
</span><span id="__span-4-24"><span class="nt">options</span><span class="p">:</span>
</span><span id="__span-4-25"><span class="w">  </span><span class="nt">stylesheets</span><span class="p">:</span>
</span><span id="__span-4-26"><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">styles.css</span>
</span><span id="__span-4-27">
</span><span id="__span-4-28"><span class="nt">parameters</span><span class="p">:</span>
</span><span id="__span-4-29"><span class="w">  </span><span class="c1"># These defaults are deep-merged into any parameters specified at run-time</span>
</span><span id="__span-4-30"><span class="w">  </span><span class="c1"># during rendering. The latter will take precedence.</span>
</span><span id="__span-4-31"><span class="w">  </span><span class="nt">defaults</span><span class="p">:</span>
</span><span id="__span-4-32"><span class="w">    </span><span class="nt">locale</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">en_AU</span>
</span><span id="__span-4-33"><span class="w">    </span><span class="nt">our_abn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">54321123456</span>
</span><span id="__span-4-34"><span class="w">    </span><span class="nt">contract</span><span class="p">:</span>
</span><span id="__span-4-35"><span class="w">      </span><span class="nt">term_in_years</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id="__span-4-36"><span class="w">  </span><span class="c1"># JSON Schema used to validate parameters supplied at run-time.</span>
</span><span id="__span-4-37"><span class="w">  </span><span class="nt">schema</span><span class="p">:</span>
</span><span id="__span-4-38"><span class="w">    </span><span class="nt">$schema</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://json-schema.org/draft/2020-12/schema</span>
</span><span id="__span-4-39"><span class="w">    </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Parameters validation schema</span>
</span><span id="__span-4-40"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
</span><span id="__span-4-41"><span class="w">    </span><span class="nt">required</span><span class="p">:</span>
</span><span id="__span-4-42"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">locale</span>
</span><span id="__span-4-43"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">customer_name</span>
</span><span id="__span-4-44"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">customer_abn</span>
</span><span id="__span-4-45"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">contract</span>
</span><span id="__span-4-46"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">price</span>
</span><span id="__span-4-47"><span class="w">    </span><span class="nt">properties</span><span class="p">:</span>
</span><span id="__span-4-48"><span class="w">      </span><span class="nt">locale</span><span class="p">:</span>
</span><span id="__span-4-49"><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-4-50"><span class="w">        </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">locale</span>
</span><span id="__span-4-51"><span class="w">      </span><span class="nt">customer_name</span><span class="p">:</span>
</span><span id="__span-4-52"><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-4-53"><span class="w">        </span><span class="nt">minLength</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id="__span-4-54"><span class="w">      </span><span class="nt">customer_abn</span><span class="p">:</span>
</span><span id="__span-4-55"><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-4-56"><span class="w">        </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">au.ABN</span>
</span><span id="__span-4-57"><span class="w">      </span><span class="nt">contract</span><span class="p">:</span>
</span><span id="__span-4-58"><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
</span><span id="__span-4-59"><span class="w">      </span><span class="nt">price</span><span class="p">:</span>
</span><span id="__span-4-60"><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span>
</span><span id="__span-4-61"><span class="w">        </span><span class="nt">minimum</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.00</span>
</span><span id="__span-4-62">
</span><span id="__span-4-63"><span class="c1"># This gets Jinja rendered and added as metadata to the output documents.</span>
</span><span id="__span-4-64"><span class="c1"># PDF / HTML conventions for metadata are respected.</span>
</span><span id="__span-4-65"><span class="nt">metadata</span><span class="p">:</span>
</span><span id="__span-4-66"><span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Contract of Sale</span>
</span><span id="__span-4-67"><span class="w">  </span><span class="nt">subject</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">customer_name</span><span class="nv"> </span><span class="s">}}&#39;</span>
</span></code></pre></div>
<h2 id="document-template-content">Document Template Content<a class="headerlink" href="#document-template-content" title="Permanent link">&para;</a></h2>
<p>The <code>documents</code> and <code>overlays</code> keys in the document template
<a href="#template-configuration-file">configuration file</a> list the files that will be
processed and assembled to produce the final PDF document.</p>
<p>Two types of file are permitted in these lists:</p>
<ol>
<li>
<p>HTML files (<code>*.html</code> / <code>*.htm</code>)</p>
</li>
<li>
<p>PDF files (<code>*.pdf</code>) (PDF output only).</p>
</li>
</ol>
<p>The HTML files may be either files directly constructed by the template author,
files that have been imported via the <code>imports</code> key, or HTML that has been
compiled from other formats (e.g. Markdown) during the template compilation
phase.</p>
<p>For compiled files, the original file suffix indicates the content type and
hence the process used to compile it to HTML format.</p>
<p>The <a href="11-extending-docma.html#content-compilers">content compiler</a> interface is extensible. New file
types can be added easily.</p>
<h3 id="html-files-html-htm">HTML Files (*.html, *.htm)<a class="headerlink" href="#html-files-html-htm" title="Permanent link">&para;</a></h3>
<p>When producing standalone HTML outputs, normal HTML conventions should be
followed, keeping in mind the limitations of the target rendering environment
(e.g. a variety of email clients).</p>
<p>When producing PDF outputs, the source HTML used in a docma template should be
written explicitly for print, rather than web layout. There are a set of special
HTML constructs available when the target media is print. Effective use of
these is essential to producing nice output. For an excellent short tutorial on
the subject, see <a href="https://www.smashingmagazine.com/2015/01/designing-for-print-with-css/">Designing For Print With
CSS</a></p>
<p>HTML source files are copied unchanged to the compiled docma template during the
compilation phase.</p>
<p>HTML files can reference other resources in the compiled template (e.g. images,
style sheets etc.) using URLs in the format <code>file:filename</code>. For example</p>
<div class="language-html highlight"><pre><span></span><code><span id="__span-5-1"><span class="p">&lt;</span><span class="nt">IMG</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;file:resources/logo.png&quot;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&quot;logo&quot;</span><span class="p">&gt;</span>
</span></code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code>file:</code> scheme indicator is essential. The filename is relative to the
template base directory. Do not use <code>file://</code> as that implies a network
location will follow, which makes no sense for local files.</p>
</div>
<p>HTML files may contain <a href="https://jinja.palletsprojects.com/en/">Jinja</a> markup to
manipulate content during the <a href="05-template-rendering.html#docma-template-rendering">rendering phase</a>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Take care when re-purposing HTML content from other systems that may leave
Jinja detritus behind. This may need to be manually deleted first.</p>
</div>
<p>HTML files can also reference dynamic content generators that will be invoked
during the <a href="05-template-rendering.html#docma-template-rendering">rendering phase</a>. This can be used to
include content for charts, QR codes etc. Dynamic content generators are
accessed by referencing a URL with the <code>docma</code> scheme.</p>
<p>For example, the following will generate and insert a QR code:</p>
<div class="language-html+jinja highlight"><pre><span></span><code><span id="__span-6-1"><span class="p">&lt;</span><span class="nt">IMG</span>
</span><span id="__span-6-2">  <span class="na">src</span><span class="o">=</span><span class="s">&quot;docma:qrcode?</span><span class="cp">{{</span>
</span><span id="__span-6-3">    <span class="o">{</span>
</span><span id="__span-6-4">      <span class="s1">&#39;text&#39;</span><span class="o">:</span> <span class="s1">&#39;Hello world!&#39;</span><span class="o">,</span>
</span><span id="__span-6-5">      <span class="s1">&#39;fg&#39;</span><span class="o">:</span> <span class="s1">&#39;white&#39;</span><span class="o">,</span>
</span><span id="__span-6-6">      <span class="s1">&#39;bg&#39;</span><span class="o">:</span> <span class="s1">&#39;#338888&#39;</span>
</span><span id="__span-6-7">    <span class="o">}</span> <span class="o">|</span> <span class="nf">urlencode</span>
</span><span id="__span-6-8">  <span class="cp">}}</span><span class="s">&quot;</span>
</span><span id="__span-6-9"><span class="p">&gt;</span>
</span></code></pre></div>
<p>This is the same thing, more cryptically:</p>
<div class="language-html highlight"><pre><span></span><code><span id="__span-7-1"><span class="p">&lt;</span><span class="nt">IMG</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;docma:qrcode?text=Hello+world%21&amp;fg=white&amp;bg=%23338888&quot;</span><span class="p">&gt;</span>
</span></code></pre></div>
<p>See <a href="05-template-rendering.html#dynamic-content-generation">Dynamic Content Generation</a> for more
information.</p>
<p>Important points to note:</p>
<ul>
<li>
<p>The <a href="https://weasyprint.org">WeasyPrint</a> package is designed to convert HTML
    for print to PDF. It does an excellent job, but some constructs take a bit
    of fiddling to get right. It seems to be more aligned to Safari behaviour
    than, say, Chrome, if that helps when previewing template components.</p>
</li>
<li>
<p>HTML produced by some WYSIWYG editors can be a tortured, gnarly mess.
    WeasyPrint may struggle with it. In many cases, it's better to hand-write
    lean, clean HTML using an IDE or an AI crutch of some kind.</p>
</li>
</ul>
<h3 id="pdf-files-pdf">PDF Files (*.pdf)<a class="headerlink" href="#pdf-files-pdf" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>PDF output only.</p>
</div>
<p>PDF files in the template are copied to the compiled template unchanged. They
are simply added into the final document composition process as-is. This is
useful for boilerplate content, such as contract terms and conditions.</p>
<p>PDF files are not Jinja rendered during compilation. Once again, they are used
as-is.</p>
<h3 id="markdown-files-md">Markdown Files (*.md)<a class="headerlink" href="#markdown-files-md" title="Permanent link">&para;</a></h3>
<p>All Markdown files are converted to HTML during the compilation phase. i.e.
<code>myfile.md</code> in the template source becomes <code>myfile.html</code> in the compiled
template.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The HTML variant of the name <strong>must</strong> be used everywhere in the template when
referencing the file.</p>
</div>
<p>Markdown files may contain <a href="https://jinja.palletsprojects.com/en/">Jinja</a> markup
to manipulate content during the <a href="05-template-rendering.html#docma-template-rendering">rendering phase</a>.</p>
<p>Conversion from Markdown to HTML is done using the Python
<a href="https://python-markdown.github.io">markdown</a> package with the following
<a href="https://python-markdown.github.io/extensions/">extensions</a> enabled:</p>
<ul>
<li>extras</li>
<li>admonition.</li>
</ul>
<p>Important points to note:</p>
<ul>
<li>
<p>The conversion from Markdown to HTML will <em>not</em> add
    <code>&lt;HTML&gt;...&lt;BODY&gt;&lt;/BODY&gt;&lt;/HTML&gt;</code>
    framing around the result. This is an advantage, as it means the content can
    be included in other documents using Jinja <code>{% include 'myfile.html' %}</code>
    directives. If a Markdown originated source file is to be used stand-alone,
    a small HTML wrapper that references the content file may be needed to
    provide the HTML framing, style sheet etc.</p>
</li>
<li>
<p>The Markdown format is particularly suited to longer, textual content.
    It is a lot easier to edit and maintain than HTML, but complex styling is
    more difficult. The Python <a href="https://python-markdown.github.io">markdown</a>
    package has some non-standard extensions that do help with this.</p>
</li>
</ul>
<h2 id="locale-in-docma-templates">Locale in Docma Templates<a class="headerlink" href="#locale-in-docma-templates" title="Permanent link">&para;</a></h2>
<p>Prior to version 2.2.0, docma had no particular notion of the region or locale
with which a particular template, or the documents it produces, is associated.
If special formatting was required, it was up to the template designer to handle
that manually.</p>
<p>This applied for elements such as:</p>
<ul>
<li>phone numbers</li>
<li>currencies</li>
<li>numbers and percentages</li>
<li>dates and times.</li>
</ul>
<p>Version 2.2.0 introduces the concept of <em>locale</em>. A new suite of <a href="06-jinja-rendering.html#docma-jinja-filters">docma provided
Jinja filters</a> use locale information
to handle the elements listed above in accordance with locale specific
conventions instead of requiring the template designer to handle everything
manually. For example:</p>
<div class="language-jinja highlight"><pre><span></span><code><span id="__span-8-1"><span class="cp">{{</span> <span class="m">123456</span> <span class="o">|</span> <span class="nf">decimal</span> <span class="cp">}}</span><span class="x"> -- Format using locale specific separators etc.</span>
</span><span id="__span-8-2"><span class="cp">{{</span> <span class="m">123456</span> <span class="o">|</span> <span class="nf">AUD</span> <span class="cp">}}</span><span class="x"> -- Format however Australian $ are shown in the current locale</span>
</span></code></pre></div>
<p>See <a href="06-jinja-rendering.html#docma-jinja-rendering">Docma Jinja Rendering</a> for more information.</p>
<p>The locale for a template manifests as an additional Jinja rendering parameter,
<code>locale</code>, which is expressed in the normal way as a combination of a language
indicator and a 2 character ISO country code. e.g. <code>en_AU</code>, <code>en_CA</code>, <code>fr_CA</code>.
It can be set in the same way as any other rendering parameter, including any,
or all, of the following (from lowest precedence to highest):</p>
<ul>
<li>
<p>Including it in the <code>parameters -&gt; defaults</code> in the
    <a href="#template-configuration-file">template configuration file</a>.</p>
</li>
<li>
<p>Specifying it on the command line when rendering a template to PDF or HTML
    output.</p>
</li>
<li>
<p>Setting it within a template using <code>{% set locale="...." %}</code>.</p>
</li>
<li>
<p>In some <a href="06-jinja-rendering.html#docma-jinja-filters">jinja filters</a>, specifying
    locale as an explicit argument to override the current effective value.</p>
</li>
</ul>
<p>From version 2.2.0, new templates created using <a href="10-installation-and-usage.html#creating-a-new-document-template">docma
new</a> will include a default value in the
<a href="#template-configuration-file">template configuration file</a>. It's a good idea to
add it to earlier templates, thus:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-9-1"><span class="c1"># config.yaml</span>
</span><span id="__span-9-2">
</span><span id="__span-9-3"><span class="nt">parameters</span><span class="p">:</span>
</span><span id="__span-9-4"><span class="w">  </span><span class="nt">defaults</span><span class="p">:</span>
</span><span id="__span-9-5"><span class="w">    </span><span class="nt">locale</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;en_AU&quot;</span>
</span></code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>If <code>locale</code> is not specified using one of the mechanisms described above, it
will default to whatever random value the underlying platform assumes.
Good luck with that.</p>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; Origin Energy
    </div>
  
</div>
      <div class="md-footer-social">
        <div class="md-copyright">
          <div class="md-copyright__highlight">
            
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": ["navigation.instant", "content.code.copy"], "search": "assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>